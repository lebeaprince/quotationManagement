<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Quotation Letter</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <style>
        @media print {
            .no-print { display: none !important; }
            body { -webkit-print-color-adjust: exact; print-color-adjust: exact; }
        }
        .letterhead {
            border-bottom: 3px solid #0d6efd; padding-bottom: 8px; margin-bottom: 24px;
        }
        .letter-meta {
            font-size: 0.95rem;
        }
        .totals td { font-weight: bold; }
    </style>
</head>
<body class="p-4">
<div class="container">
    <div class="d-flex justify-content-between align-items-center letterhead">
        <div>
            <h2 class="mb-0">Your Company Name</h2>
            <div>Address line 1, City</div>
            <div>Phone: 000-000-0000 | email@example.com</div>
        </div>
        <img class="img-fluid" style="height:60px" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='240' height='60'%3E%3Crect width='240' height='60' fill='%230d6efd'/%3E%3Ctext x='50%' y='50%' dominant-baseline='middle' text-anchor='middle' fill='white' font-size='20'%3ELOGO%3C/text%3E%3C/svg%3E" alt="Logo" />
    </div>

    <div class="d-flex justify-content-between mb-3 letter-meta">
        <div>
            <div><strong>Letter No:</strong> <span th:text="${letter.letterNumber}"></span></div>
            <div><strong>Date:</strong> <span th:text="${#dates.format(letter.acceptedAt, 'yyyy-MM-dd HH:mm')}"></span></div>
        </div>
        <div class="text-end">
            <div><strong>Customer:</strong> <span th:text="${customer != null ? customer.name : ('ID ' + letter.customerId)}"></span></div>
            <div><strong>Email:</strong> <span th:text="${customer != null ? customer.email : ''}"></span></div>
            <div><strong>Contact:</strong> <span th:text="${customer != null ? customer.contact : ''}"></span></div>
            <div><strong>Address:</strong> <span th:text="${customer != null ? customer.address : ''}"></span></div>
        </div>
    </div>

    <p>Dear <span th:text="${customer != null ? customer.name : 'Customer'}"></span>,</p>
    <p>
        We are pleased to inform you that your quotation request has been accepted.
        Below are the details for your records.
    </p>

    <table class="table table-sm w-auto">
        <tbody>
        <tr><th class="pe-4">Currency</th><td th:text="${letter.currency}"></td></tr>
        <tr><th class="pe-4">Subtotal</th><td th:text="${#numbers.formatDecimal(letter.total - letter.vat - letter.discount, 1, 'COMMA', 2, 'POINT')}"></td></tr>
        <tr><th class="pe-4">Discount</th><td th:text="${#numbers.formatDecimal(letter.discount, 1, 'COMMA', 2, 'POINT')}"></td></tr>
        <tr><th class="pe-4">VAT</th><td th:text="${#numbers.formatDecimal(letter.vat, 1, 'COMMA', 2, 'POINT')}"></td></tr>
        <tr class="totals"><th class="pe-4">Total</th><td th:text="${#numbers.formatDecimal(letter.total, 1, 'COMMA', 2, 'POINT')}"></td></tr>
        <tr><th class="pe-4">Valid Until</th><td th:text="${letter.validUntil}"></td></tr>
        <tr><th class="pe-4">Created By</th><td th:text="${letter.createdBy}"></td></tr>
        <tr><th class="pe-4">Accepted By</th><td th:text="${letter.acceptedBy}"></td></tr>
        </tbody>
    </table>

    <p>
        Please contact us if you require any further information or adjustments.
        We appreciate your business.
    </p>

    <div class="mt-4">
        <button class="btn btn-primary no-print" onclick="window.print()">Print Letter</button>
        <a class="btn btn-secondary no-print" th:href="@{/index}">Back</a>
    </div>
</div>
</body>
</html>
